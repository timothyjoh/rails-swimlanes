# Project Status

> Auto-generated by cc-pipeline. Last updated after Phase 1.

## Overview
Swimlanes is a Trello-like board management app built with Rails 8, Hotwire (Turbo + Stimulus), Tailwind CSS, and SQLite. Users will be able to create boards with swimlane columns and draggable cards, with card details, board sharing, real-time updates, and customizable backgrounds.

**Current state:** Users can sign up, log in, create boards, rename boards, delete boards (with confirmation), and log out. All board actions are authentication-gated and user-scoped — you can only see and manage your own boards.

---

## Phase 1: Project Setup, Authentication, and Board CRUD

### What We Built
- Rails 8 app scaffolded with SQLite, Tailwind CSS, Hotwire (Turbo + Stimulus), and Importmap
- Sign up (`/registration/new`), log in (`/session/new`), and log out flows
- Built-in Rails 8 authentication (no Devise) — `rails generate authentication` + manual `RegistrationsController`
- Board CRUD: create, list, edit, delete; boards index is the authenticated root (`/`)
- Boards are user-scoped — only the owner can view, edit, or delete their boards
- Board name presence validation (model + controller)
- Flash messages for create/update/delete actions
- `AGENTS.md`, `README.md` created; `CLAUDE.md` updated with AGENTS.md instruction block

### How to Run It
```bash
export PATH="/usr/local/lib/ruby/gems/3.4.0/bin:/usr/local/opt/ruby/bin:$PATH"
bin/setup --skip-server   # install gems, prepare DB, npm install
bin/rails server          # start at http://localhost:3000
```
Visit `http://localhost:3000`, sign up with an email and password, and start creating boards. You'll see a card grid of your boards with Edit and Delete links on each card.

### Review Findings
- **MUST-FIX resolved — SimpleCov parallelization**: `parallelize(workers: :number_of_processors)` caused SimpleCov to under-report coverage. Fixed by switching to `parallelize(workers: 1)`. Coverage now correctly reports 82.31%.
- **MUST-FIX resolved — DB null constraint**: `boards.name` was nullable at the DB level despite model validation. Added migration `add_not_null_to_boards` to enforce `null: false` at the database layer.
- **Fixed — `User.take` non-determinism**: `sessions_controller_test.rb` changed from `User.take` to `users(:one)` for stable fixture selection.
- **Fixed — missing negative sign-up assertion**: Added `assert_not User.exists?` to the mismatched-password test.
- **Fixed — boards index missing negative scope assertion**: Added second-user board to fixture and `assert_no_match` to verify scoping.
- **Fixed — E2E login URL assertion**: Added `toHaveURL('/boards')` to the login success test.
- **Deferred — `before_action :require_authentication` implicit**: `ApplicationController` relies on implicit behavior from the `Authentication` concern rather than declaring it explicitly. Functionally correct but noted for Phase 2.
- **Deferred — `show` action out of scope**: A `GET /boards/:id` route and view were added outside Phase 1 scope with no authorization test. Phase 2 will promote this to the full board canvas for swimlanes.
- **Deferred — whitespace board names pass validation**: `presence: true` allows `"   "`. Noted for future attention.

### What's Next
- **Phase 2**: Swimlane (column) model + Card model, board show page as the main canvas, Swimlane CRUD, Card CRUD, drag-and-drop reordering with SortableJS
- Promote the `show` action into a real board detail page where swimlanes will live
- Add explicit `before_action :require_authentication` to `ApplicationController`
- Add authorization test for the `show` action
- Commit per task (not per phase) going forward

### Test Coverage
- **Command**: `bin/rails test`
- **Result**: 30 runs, 71 assertions, **0 failures, 0 errors, 0 skips**
- **Coverage**: **82.31%** line coverage (107/130 lines) — above the 80% minimum threshold
- **Tests added this phase**:
  - `test/models/user_test.rb` — email presence, uniqueness
  - `test/models/board_test.rb` — name presence, user association required
  - `test/controllers/sessions_controller_test.rb` — login success/failure
  - `test/integration/authentication_flow_test.rb` — sign up, sign in, invalid credentials, unauthenticated redirect, log out
  - `test/integration/boards_flow_test.rb` — create, blank name error, edit, delete, cross-user access denial, index scoping
  - `e2e/auth.spec.js` — sign up → boards, log out → login, unauthenticated redirect
  - `e2e/boards.spec.js` — create board, edit board name, delete board
- **Not yet covered**: `show` action authorization, sign-up with duplicate email (HTTP flow), whitespace-only board names

---
